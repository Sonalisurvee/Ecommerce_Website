{% extends 'userpanel/userbase.html' %}
{% load static %}
{% block title %}Single product{% endblock title %}
{% block body %}

<style>
  .img-fluid {
    max-width: 100%;
    height: auto
  }

  @media only screen and (min-width: 992px) and (max-width: 1200px) {

    /* line 133, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
    .product_image_area .single_product_text {
      margin: 6px 0 10px;
    }
  }

  .product_image_area .single_product_text {
    margin: 10px 0 20px;
  }

  @media (max-width: 991px) {

    /* line 133, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
    .product_image_area .single_product_text {
      margin: 20px 0 30px;
    }
  }

  /* line 141, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
  .product_image_area .single_product_text h3 {
    font-size: 40px;
  }

  @media (max-width: 991px) {

    /* line 141, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
    .product_image_area .single_product_text h3 {
      font-size: 25px;
    }

    /* line 145, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
    .product_image_area .single_product_text h3 br {
      display: none;
    }
  }

  /* line 150, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
  .product_image_area .single_product_text p {
    margin-top: 0px;
    font-size: 16px;
    color: black;
  }

  @media (max-width: 991px) {

    /* line 150, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
    .product_image_area .single_product_text p {
      margin-top: 0px;
    }
  }

  @media only screen and (min-width: 992px) and (max-width: 1200px) {

    /* line 150, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_single_product.scss */
    .product_image_area .single_product_text p {
      margin-top: 0px;
    }
  }

  .card_ara .product_count_area p {
    color: black;
    font-size: 16px;
    /* margin-bottom: 90px; */
  }

  .btn_3 {
    display: inline-block;
    padding: 18px 36px;
    border-radius: 5px;
    background-color: #fff;
    border: 1px solid #B08EAD;
    font-size: 15px;
    font-weight: 700;
    color: #B08EAD;
    /* color: #B08EAD; */
    text-transform: uppercase;
    font-weight: 400;
    -webkit-transition: 0.5s;
    transition: 0.5s;
  }

  /* line 56, /Applications/MAMP/htdocs/old/palash/cl/shop_html/sass/_button.scss */
  .btn_3:hover {
    background-color: #B08EAD;
    color: #fff;
  }

  .breadcrumb {
    background-color: transparent;
    padding: 3px 3px;
  }

  .breadcrumb-item:hover::before {
    text-decoration: underline
  }

  .breadcrumb-item+.breadcrumb-item:hover::before {
    text-decoration: none
  }

  .breadcrumb-item.active {
    color: black
  }

  .breadcrumb-item a {
    color: black;
  }
</style>

<!-- breadcrumb part start-->
<section class="breadcrumb_part single_product_breadcrumb">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="breadcrumb_iner">
        </div>
      </div>
    </div>
  </div>
</section>
<!-- breadcrumb part end-->

<!--================Single Product Area =================-->
<div class="product_image_area">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-6">
        <div class="product_img_slide owl-carousel">
          <div class="single_product_img">
            <img src="{{ single_product.image.url }}" alt="#" class="img-fluid">
          </div>
          {% for im in products %}
          <div class="single_product_img">
            <img src="{{ im.productimage.url}}" alt="#" class="img-fluid">
          </div>
          {% endfor %}

          <!-- 
          <div class="single_product_img">
            <img src="img/product/single_product.png" alt="#" class="img-fluid">
          </div> -->
        </div>
      </div>
      <div class="col-lg-6">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
            <a href="{% url 'product_list' %}" li class="breadcrumb-item active" aria-current="page">Store</li></a>
            <li class="breadcrumb-item active" aria-current="page">{{single_product.product_name}}</li>
          </ol>
        </nav>
        <div class="single_product_text">
          <h3>{{ single_product.product_name }}</h3>
          <p>{{ single_product.product_description }}</p>
          <div class="card_ara">
            <div class="product_count_area">
              {% if updates_price %}
              <p>Price : {{ updates_price }}</p>
          {% else %}

              <p>Price : {{ single_product.price }}</p>
          {% endif %}
          
            </div>
            <div>
              <p>Categoty : {{single_product.category}}</p>
            </div>



            {% comment %} The difference between {% if single_product.size_variant.count %} and {% if
            single_product.size_variant %} is in what they are checking for in the single_product object.

            {% if single_product.size_variant %} checks if size_variant exists in the single_product object and is
            truthy. This means that even if size_variant exists but is empty or has a value of None, the condition will
            still evaluate to True.

            On the other hand, {% if single_product.size_variant.count %} checks if size_variant exists in the
            single_product object, is iterable and has at least one element. If size_variant is an empty iterable (e.g.
            an empty list or tuple), the condition will evaluate to False.

            So if single_product.size_variant is guaranteed to always exist and have at least one element, then the two
            conditions will evaluate to the same thing. However, if there's a possibility that size_variant may be empty
            or None, using {% if single_product.size_variant.count %}
            may be more appropriate to avoid potential errors or unexpected behavior in your code. {% endcomment %}


            {% comment %} count() is used to check the length of the object set {% endcomment %}
            {% if single_product.size_variant.count %}
            <div>
              <h1>wertyui</h1>
              {% for size in single_product.size_variant.all %}


              {% comment %} {% for size in single_product.size_variant %}
              The error message " 'ManyRelatedManager' object is not iterable" occurs when you try to
              iterate over a ManyToManyField related object set that is still a manager, and not yet
              evaluated as a list or queryset.

              To fix this error, you need to make sure that you are iterating over the actual list
              or queryset of related objects, and not the ManyRelatedManager object itself.

              In this code, single_product.size_variant.all returns the actual list or queryset of
              related size objects, which you can then iterate over using a for loop.

              Make sure that you also check that the size_variant related object set is not empty
              before attempting to iterate over it, as an empty set will also raise
              the same error. You can do this by checking the length of the related object
              set using the count() method:

              {% endcomment %}

              <div class="form-check form-check-inline">
                <input class="form-check-input" onchange="get_correct_price('{{size.size_name}}')" 
                {% if selected_size == size.size_name %} checked {% endif %} type="radio"
                  name="inlineRadioOptions" id="inlineRadio1" value="option1">
                <label class="form-check-label" for="inlineRadio1">{{ size.size_name }}</label>
              </div>
              {% endfor %}
            </div>
            {% endif %}



          


           
            <div class="add_to_cart">
              {% if single_product.stock <= 0 %} 
                <a href="#" class="text-danger btn_3">Out of stock</a>
              {% else %}

                {% if in_cart %}
                  <a href="#" class="btn_3">Added to cart</a>
                  <a href="{% url 'cart' %}" class="btn_3">View cart</a>
                {% else %}
                  <a href="{% url 'add_cart' single_product.id %}" class="btn_3 ">Add to cart</a>
                  <a href="{% url 'checkout' %}" class="btn_3">Buy Now</a>
                {% endif %}

              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--================End Single Product Area =================-->

<script>
  function get_correct_price(size) {
    window.location.href = window.location.pathname + `?size=${size}`;
    // console.log(size)
  }
</script>





{% endblock body %}